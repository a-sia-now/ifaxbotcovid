<b>Как пользоваться</b>:

Все просто. Отправляем релиз боту, получаем в ответном сообщении готовую новость.

Если отправить боту сообщение пресс-службы РПН (<i>"Роспотребнадзор:  в РФ проведено более X млн тестов на коронавирус ..."</i>), в ответ бот направит готовый блок "Тестирование" для новости.

<b>Бот также поддерживает спецзнаки</b>:

<i>Спецзнаки добавляются в конце текста, который отправляется боту. Без кавычек. Можно пользоваться, можно не пользоваться - как удобно.</i>

<b>$$</b> - ответ строго только в файле

<b>$$"число"</b> - ответ в файле, отсечка списка регионов с новыми случаями коронавируса - до указанного числа.
Например, $$250 - список регионов будет построен вплоть до 250, в конце куска "новые случаи в регионах" будет фраза "число новых случаев в остальных регионах не превышает 250".

<b>йй</b> - запросить у бота лог. По логу видно, какие данные найдены, какие таблицы регионов правильно распознаны, и что найти не удалось.


<b>Особенности и ограничения</b>:

- бот пытается найти в релизе данные или цифру, а потом вставляет в шаблон
- если что-то найти не удастся, вместо данных или цифры в шаблон будет вставлено значение NO_VALUE
- бот не меняет окончания единственного и множественного числа после цифры ("случАЙ", "случАЯ", "случаЕВ" и т.п.)
- бот будет использовать текущую дату и день недели, а не дату и день релиза
- телеграм разрезает длинное сообщение пользователя боту на две или более частей. Бот, чтобы правильно обработать релиз, эти куски склеивает, но они не всегда приходят на сервер в нужном порядке. Поэтому иногда возможны сбои - текст отправляется, а ответа нет. В таком случае тот же самый текст нужно попробовать отправить повторно. Если что-то не получается, стоит проверить, что именно уходит боту - правильно ли скопировался и вставился релиз.

- если размер готового текста будет больше лимита Телеграма на длину одного сообщения, ответ в любом случае придет в текстовом файле.
- по умолчанию бот старается отправить ответ с "отсечкой" списка регионов с новыми случаями в 300 (в списке будут регионы, где число новых случаев больше 300). Если сообщение слишком большое, он будет менять отсечку, чтобы сократить за счет длинного списка регионов итоговый текст.
- спецзнак $$ (отправка только файлом) позволяет избежать сокращения списка регионов. Ответ придет со значением по умолчанию (300)
- минимальное значение для "отсечки" - 100, максимальное - 700

- бот отдельно пришлет предупреждение, если какие-то данные найти не удалось.
- кроме того, бот предупредит, если общее число случаев коронавируса, смертей или выздоровевших оказалось меньше, чем референсные значения.

- в текущей версии бот настроен таким образом, чтобы максимально игнорировать возможные лишние или отсутствующие пробелы вокруг цифр в тексте релиза.


По всем вопросам пишите <a href="tg://user?id=138946204">сюда</a>.